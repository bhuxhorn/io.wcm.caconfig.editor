<!DOCTYPE html>
<html
    data-sly-use.editorConfig='io.wcm.caconfig.editor.model.EditorConfiguration'
    data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"
    ng-app="io.wcm.caconfig.editor">
  <head>
    <meta charset="UTF-8">
    <title>${'io.wcm.caconfig.editor.title' @ i18n}</title>

    <meta data-sly-resource="${'.' @ resourceType='/apps/wcm-io/wcm/commons/components/global/wcmInit' }" data-sly-unwrap></meta>
    <meta data-sly-call="${clientLib.css @ categories='io.wcm.caconfig.editor'}" data-sly-unwrap></meta>
  </head>
  <body class="coral--light" ng-controller="mainCtrl">
    <nav class="coral-Panel-header endor-BlackBar header-main">
      <a href="/" class="wcm-io-editor endor-Brand">
        <i class="wcm-io-editor endor-Brand-icon coral-Icon coral-Icon--adobeMarketingCloud coral-Icon--sizeM"></i>
      </a>
      <span class="wcm-io-editor endor-Brand" >${'io.wcm.caconfig.editor.title' @ i18n}</span>
    </nav>
    <div class="wcm-io-editor-page-border">

      <ng-view></ng-view>

      <div id="addModal" class="coral-Modal">
        <div class="coral-Modal-header">
          <i class="coral-Modal-typeIcon coral-Icon coral-Icon--sizeS"></i>
          <h2 class="coral-Modal-title coral-Heading coral-Heading--2">${'io.wcm.caconfig.editor.modal.addTitle' @ i18n}</h2>
          <button type="button" class="coral-MinimalButton coral-Modal-closeButton" title="${'io.wcm.caconfig.editor.modal.close' @ i18n}" data-dismiss="modal">
            <i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon "></i>
          </button>
        </div>
        <div class="coral-Modal-body">
          <form class="coral-Form coral-Form--aligned" style="width: 500px;">
            <section class="coral-Form-fieldset">
              <label class="coral-Form-fieldlabel">Configuration Name</label>
              <span class="coral-Select" data-init="select">
                <button type="button" class="coral-Select-button coral-MinimalButton">
                  <span class="coral-Select-button-text">Choose</span>
                </button>
                <select class="coral-Select-select">
                  <option ng-repeat="item in configNamesCollection | filter:{exists:false}" value="{{item.configName}}">{{item.label || item.configName}}</option>
                </select>
              </span>
            </section>
            <section class="coral-Form-fieldset"><label class="coral-Form-fieldlabel">&nbsp;</label></section>
            <section class="coral-Form-fieldset"><label class="coral-Form-fieldlabel">&nbsp;</label></section>
          </form>
        </div>
        <div class="coral-Modal-footer">
          <button type="button" class="coral-Button" data-dismiss="modal">${'io.wcm.caconfig.editor.modal.close' @ i18n}</button>
        </div>
      </div>

      <div id="confirmModal" class="coral-Modal">
        <div class="coral-Modal-header">
          <i class="coral-Modal-typeIcon coral-Icon coral-Icon--sizeS"></i>
          <h2 class="coral-Modal-title coral-Heading coral-Heading--2">${'io.wcm.caconfig.editor.title' @ i18n}</h2>
          <button type="button" class="coral-MinimalButton coral-Modal-closeButton" title="${'io.wcm.caconfig.editor.modal.close' @ i18n}" data-dismiss="modal">
            <i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon "></i>
          </button>
        </div>
        <div class="coral-Modal-body">
          <p>${'io.wcm.caconfig.editor.modal.success' @ i18n}</p>
        </div>
        <div class="coral-Modal-footer">
          <button type="button" class="coral-Button" data-dismiss="modal">${'io.wcm.caconfig.editor.modal.close' @ i18n}</button>
        </div>
      </div>

      <div id="errorModal" class="coral-Modal">
        <div class="coral-Modal-header">
          <i class="coral-Modal-typeIcon coral-Icon coral-Icon--sizeS"></i>
          <h2 class="coral-Modal-title coral-Heading coral-Heading--2">${'io.wcm.caconfig.editor.title' @ i18n}</h2>
          <button type="button" class="coral-MinimalButton coral-Modal-closeButton" title="${'io.wcm.caconfig.editor.modal.close' @ i18n}" data-dismiss="modal">
            <i class="coral-Icon coral-Icon--sizeXS coral-Icon--close coral-MinimalButton-icon "></i>
          </button>
        </div>
        <div class="coral-Modal-body">
          <p>${'io.wcm.caconfig.editor.modal.error' @ i18n}</p>
        </div>
        <div class="coral-Modal-footer">
          <button type="button" class="coral-Button" data-dismiss="modal">${'io.wcm.caconfig.editor.modal.close' @ i18n}</button>
        </div>
      </div>

      <meta data-sly-call="${clientLib.js @ categories='io.wcm.caconfig.editor'}" data-sly-unwrap></meta>
      <script type="text/javascript">
        angular.module("io.wcm.caconfig.services")
          .config(["parametersProvider", function(parametersProvider) {
            var configDataUrl = "${editorConfig.configDataUrl @ context='uri'}";
            var configNamesUrl = "${editorConfig.configNamesUrl @ context='uri'}";
            var i18n = {
              applicationFilter: "${'io.wcm.caconfig.editor.filter.application' @ i18n, context='text'}",
              groupFilter: "${'io.wcm.caconfig.editor.filter.group' @ i18n, context='text'}"
            };
            parametersProvider.setConfig({i18n: i18n, configNamesUrl: configNamesUrl, configDataUrl: configDataUrl});
          }]);
      </script>

    </div>
  </body>
</html>
